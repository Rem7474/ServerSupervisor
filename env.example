# ========================================
# ServerSupervisor - Environment Variables
# ========================================
# Copy this file to .env and adjust values
# cp .env.example .env

# ----------------------------------------
# Server
# ----------------------------------------

SERVER_PORT=8080

# Public URL of the application — REQUIRED when behind a reverse proxy (NPM, Traefik, Caddy...)
# Used for WebSocket origin validation and CORS.
# Must match exactly what the browser uses (scheme + domain + port if non-standard).
# Examples:
#   BASE_URL=https://supervisor.yourdomain.com
#   BASE_URL=http://192.168.1.10:8080
BASE_URL=http://localhost:8080

# Trusted reverse proxy IPs or CIDR ranges (comma-separated)
# Allows reading real client IP from X-Forwarded-For header.
# Set to the IP/subnet of your NPM, Traefik, or Nginx container.
# Leave empty if running without a reverse proxy.
# Examples:
#   TRUSTED_PROXIES=172.18.0.0/16
#   TRUSTED_PROXIES=172.18.0.5,172.19.0.0/16
TRUSTED_PROXIES=

# ----------------------------------------
# Database
# ----------------------------------------

# Only needed if not using docker-compose (where DB_HOST=postgres is set automatically)
DB_HOST=localhost
DB_PORT=5432
DB_USER=supervisor
DB_NAME=serversupervisor
DB_SSLMODE=disable

# Required — database password
DB_PASSWORD=your-secure-password-here

# ----------------------------------------
# Authentication
# ----------------------------------------

# Required — generate a strong random secret (e.g. openssl rand -hex 32)
JWT_SECRET=generate-a-random-long-secret-here

# JWT access token lifetime (default: 24h)
# Supported units: h (hours), m (minutes), s (seconds)
JWT_EXPIRATION=24h

# Refresh token lifetime (default: 168h = 7 days)
REFRESH_TOKEN_EXPIRATION=168h

# Default admin credentials (created on first startup)
ADMIN_USER=admin
ADMIN_PASSWORD=your-admin-password

# ----------------------------------------
# Rate Limiting
# ----------------------------------------

# Requests per second per IP (default: 100)
RATE_LIMIT_RPS=100

# Maximum burst size per IP (default: 200)
RATE_LIMIT_BURST=200

# ----------------------------------------
# GitHub Release Tracking (optional)
# ----------------------------------------

# Personal access token — increases rate limit from 60 to 5000 req/hour
# Required if you track many repositories.
# Create at: https://github.com/settings/tokens (no scopes needed for public repos)
GITHUB_TOKEN=

# How often to check for new releases (default: 15m)
GITHUB_POLL_INTERVAL=15m

# ----------------------------------------
# Alerts & Notifications (optional)
# ----------------------------------------

# Generic webhook URL for alert notifications (Discord, Slack, ntfy, custom...)
# Leave empty to disable webhook alerts.
# ntfy example:  https://ntfy.sh/your-topic
# Discord example: https://discord.com/api/webhooks/...
NOTIFY_URL=

# SMTP configuration for email alerts
# Leave SMTP_HOST empty to disable email alerts.
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=serversupervisor@yourdomain.com
SMTP_TO=admin@yourdomain.com
SMTP_TLS=true

# ----------------------------------------
# Metrics
# ----------------------------------------

# How many days to keep raw metrics (default: 30)
METRICS_RETENTION_DAYS=30
